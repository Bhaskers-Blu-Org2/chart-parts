queue:
  name: Hosted Linux Preview
  demands: 
    - npm

steps:
- task: NodeTool@0
  inputs:
    versionSpec: "8.x"

- task: geeklearningio.gl-vsts-tasks-yarn.yarn-installer-task.YarnInstaller@2
  inputs:
    versionSpec: "v1.5.1" 

- task: geeklearningio.gl-vsts-tasks-yarn.yarn-task.Yarn@2
  inputs:
    Arguments: "install"

- task: geeklearningio.gl-vsts-tasks-yarn.yarn-task.Yarn@2
  env: 
    CI: true
  inputs:
    Arguments: "build"

- task: geeklearningio.gl-vsts-tasks-yarn.yarn-task.Yarn@2
  env: 
    CI: true
  inputs:
    Arguments: "test"

- task: PublishTestResults@2
  inputs:
    testResultsFiles: test-report.xml

- task: PublishCodeCoverageResults@1
  inputs:
    codeCoverageTool: Cobertura
    summaryFileLocation: $(Build.SourcesDirectory)/coverage/cobertura-coverage.xml
    reportDirectory: $(Build.SourcesDirectory)/coverage/lcov-report
